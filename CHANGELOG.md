# Changelog

æœ¬æ–‡æ¡£è®°å½• Polymarket Dump & Hedge Bot çš„æ‰€æœ‰é‡è¦å˜æ›´ã€‚

æ ¼å¼éµå¾ª [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

## [Unreleased]

### æ–°å¢

#### Dashboard UI ä¼˜åŒ– (v0.3.0 é¢„è§ˆ)
- **MARKET INFO åŒºåŸŸ** - æ–°å¢å¸‚åœºä¿¡æ¯å±•ç¤º
  - æ˜¾ç¤ºå½“å‰å¸‚åœºåç§°å’Œå‰©ä½™æ—¶é—´å€’è®¡æ—¶
  - UP/DOWN Token ID ç¼©ç•¥æ˜¾ç¤º
  - æ—¶é—´é¢œè‰²æŒ‡ç¤º (çº¢è‰² < 1åˆ†é’Ÿ, é»„è‰² < 3åˆ†é’Ÿ, ç»¿è‰²)

- **ORDER BOOK åŒºåŸŸ** - æ–°å¢å®æ—¶è®¢å•ç°¿æ˜¾ç¤º
  - å·¦å³åˆ†æ æ˜¾ç¤º UP/DOWN è®¢å•ç°¿
  - BIDS (ä¹°å•) å’Œ ASKS (å–å•) åˆ†åˆ—æ˜¾ç¤º
  - æ˜¾ç¤ºæœ€å¤š 10 æ¡£æ·±åº¦
  - æ€»é‡ç»Ÿè®¡æ˜¾ç¤º

- **MARKET ANALYSIS å¢å¼º** - æ¢å¤å®Œæ•´å¥—åˆ©åˆ†æ
  - UP/DOWN ä»·æ ¼ç™¾åˆ†æ¯”æ˜¾ç¤º
  - Combined ç»„åˆä»·æ ¼ + Target ç›®æ ‡é˜ˆå€¼
  - Spread ä»·å·®ç™¾åˆ†æ¯”
  - å¯è§†åŒ–è¿›åº¦æ¡æŒ‡ç¤ºå™¨:
    - å¥—åˆ©æœºä¼š: `â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ` (ç»¿è‰²)
    - ç­‰å¾…ä¸­: `â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘` (é»„è‰²)
  - Bid ä»·æ ¼å¯¹æ¯” (UP vs DOWN)
  - Delta å·®å€¼ç™¾åˆ†æ¯”
  - äº¤æ˜“å‘¨æœŸæ•° (Pairs) å’Œç´¯è®¡ç›ˆäº (PnL)
  - å¥—åˆ©æœºä¼šæç¤º: `ğŸ¯ ARBITRAGE OPPORTUNITY! +$X.XX`

### æ”¹è¿›

- Dashboard å¸ƒå±€è°ƒæ•´:
  - POSITIONS å’Œ MARKET ANALYSIS é«˜åº¦å¢åŠ åˆ° 12 è¡Œ
  - TRANSACTIONS å’Œ STATUS åŒºåŸŸé¡¶éƒ¨ä½ç½®è°ƒæ•´
  - æ•´ä½“å¸ƒå±€æ›´ç´§å‡‘ï¼Œä¿¡æ¯å¯†åº¦æ›´é«˜

### é…ç½®

- é™æ€å¸‚åœº Fallback æ”¯æŒ:
  - `TOKEN_ID_UP` - é™æ€ UP Token ID
  - `TOKEN_ID_DOWN` - é™æ€ DOWN Token ID
  - `CONDITION_ID` - é™æ€ Condition ID
  - å½“è‡ªåŠ¨å‘ç°æœªæ‰¾åˆ°å¸‚åœºæ—¶è‡ªåŠ¨ä½¿ç”¨é™æ€é…ç½®

---

## [0.2.0] - 2026-01-01

### æ–°å¢

#### BTC 15 åˆ†é’Ÿå¸‚åœºè‡ªåŠ¨å‘ç°
- **MarketDiscoveryService** - è‡ªåŠ¨å‘ç° BTC 15 åˆ†é’Ÿé¢„æµ‹å¸‚åœº
  - Polymarket Gamma API é›†æˆ
  - å¤šå…³é”®è¯æœç´¢ (btc, bitcoin)
  - æ™ºèƒ½æ—¶é—´çª—å£è§£æ
  - å»é‡å’Œæœ‰æ•ˆæ€§éªŒè¯
  - ç¼“å­˜å’ŒèŠ‚æµæ§åˆ¶

#### è½®æ¬¡è‡ªåŠ¨è½®æ¢
- **RoundManager å¢å¼º** - æ— ç¼å¸‚åœºåˆ‡æ¢
  - `enableAutoDiscover()` - å¯ç”¨è‡ªåŠ¨å‘ç°
  - `disableAutoDiscover()` - ç¦ç”¨è‡ªåŠ¨å‘ç°
  - `setFromBtc15mMarket()` - ä»å‘ç°çš„å¸‚åœºè®¾ç½®è½®æ¬¡
  - `autoTransitionToNextMarket()` - è‡ªåŠ¨è¿‡æ¸¡åˆ°ä¸‹ä¸€å¸‚åœº
  - è½®æ¬¡åˆ°æœŸå‰é¢„åŠ è½½ä¸‹ä¸€å¸‚åœº
  - è‡ªåŠ¨é‡æ–°è®¢é˜… WebSocket

#### ä¸“ä¸šäº¤æ˜“é¢æ¿ (TradingDashboard)
- **æŒä»“é¢æ¿** - å®æ—¶æŒä»“å±•ç¤º
  - UP/DOWN æŒä»“è¿›åº¦æ¡
  - æ•°é‡ã€å‡ä»·ã€æˆæœ¬æ˜¾ç¤º
  - æœªå®ç°ç›ˆäºè®¡ç®—
  - å·²å®ç°ç›ˆäºç»Ÿè®¡

- **å¸‚åœºåˆ†æé¢æ¿** - å®æ—¶å¸‚åœºæ•°æ®
  - UP/DOWN ä»·æ ¼
  - Combined ä»·æ ¼ (UP + DOWN)
  - Spread ä»·å·®ç™¾åˆ†æ¯”
  - Delta å·®å€¼

- **è®¢å•ç°¿é¢æ¿** - æ·±åº¦æ•°æ®å±•ç¤º
  - UP/DOWN ä¹°å–ç›˜
  - å¤šæ¡£ä»·æ ¼å’Œæ•°é‡
  - å®æ—¶æ›´æ–°

- **äº¤æ˜“æµæ°´é¢æ¿** - æœ€è¿‘äº¤æ˜“è®°å½•
  - æ—¶é—´ã€æ–¹å‘ã€ä»·æ ¼ã€æ•°é‡
  - äº¤æ˜“å“ˆå¸Œæ˜¾ç¤º

#### MarketWatcher è®¢å•ç°¿å¢å¼º
- **è®¢å•ç°¿æ•°æ®ç»“æ„** - OrderBook, OrderBookLevel, OrderBookSnapshot
- **è®¢å•ç°¿æ–¹æ³•**
  - `setTokenIds()` - è®¾ç½®ç›‘æ§çš„ Token ID
  - `getOrderBook()` - è·å–æŒ‡å®š Token è®¢å•ç°¿
  - `getUpOrderBook()` / `getDownOrderBook()` - å¿«æ·è·å–
  - `getOrderBookSnapshot()` - å®Œæ•´å¿«ç…§
  - `getBestPrices()` - æœ€ä½³ä¹°å–ä»·
  - `getDepthInRange()` - ä»·æ ¼èŒƒå›´å†…æ·±åº¦
  - `getSpread()` - ä»·å·®
  - `getMidPrice()` - ä¸­é—´ä»·
  - `clearOrderBooks()` - æ¸…ç©ºè®¢å•ç°¿

#### AlertManager å¢å¼º
- `getStats()` - è·å–å‘Šè­¦ç»Ÿè®¡ (ä»Šæ—¥æ•°é‡ã€æ€»æ•°é‡)

### é…ç½®
- `AUTO_DISCOVER_MARKET=true` - å¯ç”¨å¸‚åœºè‡ªåŠ¨å‘ç°
- `MARKET_DISCOVERY_INTERVAL=10000` - å‘ç°é—´éš” (ms)

### æµ‹è¯•
- **MarketDiscoveryService.test.ts** - 27 ä¸ªæµ‹è¯•ç”¨ä¾‹
  - åˆå§‹åŒ–ã€å¸‚åœºå‘ç°ã€è§£æã€è‡ªåŠ¨å‘ç°æœåŠ¡
  - å½“å‰/ä¸‹ä¸€å¸‚åœºç®¡ç†ã€BTC 15m éªŒè¯
  - waitForNextMarketã€å¹¶å‘æ§åˆ¶

- **RoundManager.test.ts** - 37 ä¸ªæµ‹è¯•ç”¨ä¾‹
  - åˆå§‹åŒ–ã€å¿«ç…§æ›´æ–°ã€å¸‚åœºä¿¡æ¯
  - çŠ¶æ€æŸ¥è¯¢ã€å‘¨æœŸæ£€æŸ¥
  - è‡ªåŠ¨å‘ç°é›†æˆæµ‹è¯•

### æ”¹è¿›
- æµ‹è¯•å¥—ä»¶ä» 259 å¢åŠ åˆ° **323** ä¸ªæµ‹è¯•ç”¨ä¾‹
- æµ‹è¯•è¦†ç›–ç‡æå‡è‡³çº¦ **75%**

---

## [0.1.0] - 2025-12-31

### æ–°å¢

#### æ ¸å¿ƒåŠŸèƒ½
- **äº¤æ˜“å¼•æ“** - å®Œæ•´çš„äº¤æ˜“çŠ¶æ€æœºï¼Œæ”¯æŒ IDLE â†’ WATCHING â†’ LEG1 â†’ LEG2 â†’ COMPLETED æµç¨‹
- **æš´è·Œæ£€æµ‹** - æ»‘åŠ¨çª—å£ç®—æ³•æ£€æµ‹ 3 ç§’å†…ä»·æ ¼æš´è·Œä¿¡å·
- **è‡ªåŠ¨å¯¹å†²** - æ»¡è¶³ sumTarget æ¡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œ Leg2 å¯¹å†²äº¤æ˜“
- **è½®æ¬¡ç®¡ç†** - è‡ªåŠ¨åˆ‡æ¢ BTC 15åˆ†é’Ÿé¢„æµ‹å¸‚åœºè½®æ¬¡
- **å¸‚åœºç›‘æ§** - WebSocket å®æ—¶ä»·æ ¼è®¢é˜…ï¼Œæ¯«ç§’çº§å“åº”
- **è®¢å•æ‰§è¡Œ** - æ”¯æŒå¸‚ä»·å•å’Œé™ä»·å•

#### å¯¹å†²ç­–ç•¥å¢å¼º
- **æ¦‚ç‡é¢„æµ‹** - å¤šå› å­åˆ†æé¢„æµ‹å¯¹å†²æˆåŠŸæ¦‚ç‡
- **æ—¶é—´ä¼°ç®—** - é¢„ä¼°å¯¹å†²è¾¾æˆæ‰€éœ€æ—¶é—´
- **æ¨èç”Ÿæˆ** - æ ¹æ®å¸‚åœºæ¡ä»¶ç”Ÿæˆæ“ä½œå»ºè®®
- **æ³¢åŠ¨ç‡è®¡ç®—** - å®æ—¶æ³¢åŠ¨ç‡åˆ†æ
- **è¶‹åŠ¿åˆ†æ** - ä»·æ ¼è¶‹åŠ¿æ–¹å‘åˆ¤æ–­
- **ä»·å·®å¥åº·åº¦** - ä¹°å–ä»·å·®åˆ†æ

#### Builder API æ”¯æŒ
- **è®¢å•å½’å±** - æ”¯æŒ Polymarket Builder API å®ç°è®¢å•å½’å› 
- **HMAC ç­¾å** - å®Œæ•´çš„ HMAC-SHA256 è¯·æ±‚ç­¾åæœºåˆ¶
- **å‡­æ®é…ç½®** - æ”¯æŒ BUILDER_API_KEY, BUILDER_SECRET, BUILDER_PASSPHRASE

#### å‘Šè­¦ç³»ç»Ÿ
- **å¤šæ¸ é“å‘Šè­¦** - Console / Telegram Bot / Discord Webhook
- **åˆ†çº§å‘Šè­¦** - info / warning / critical ä¸‰çº§
- **æ™ºèƒ½èŠ‚æµ** - å¯é…ç½®æ—¶é—´çª—å£å†…çš„æœ€å¤§å‘Šè­¦æ•°
- **é™é»˜æ—¶æ®µ** - æ”¯æŒå…æ‰“æ‰°æ—¶é—´é…ç½®
- **é¢„å®šä¹‰æ¨¡æ¿** - æš´è·Œæ£€æµ‹ã€äº¤æ˜“å®Œæˆã€è®¢å•å¤±è´¥ç­‰å‘Šè­¦æ¨¡æ¿

#### å‘Šè­¦ç±»å‹
- `dump_detected` - æš´è·Œä¿¡å·æ£€æµ‹
- `trade_completed` - äº¤æ˜“å‘¨æœŸå®Œæˆ
- `order_failed` - è®¢å•æ‰§è¡Œå¤±è´¥
- `ws_disconnected` - WebSocket æ–­å¼€
- `insufficient_funds` - ä½™é¢ä¸è¶³
- `round_expired_loss` - å›åˆè¿‡æœŸäºæŸ
- `system_error` - ç³»ç»Ÿé”™è¯¯

#### Dashboard äº¤äº’
- **ç»ˆç«¯ UI** - blessed æ‰“é€ çš„äº¤äº’å¼ç»ˆç«¯ç•Œé¢
- **å®æ—¶æ›´æ–°** - ä»·æ ¼ã€çŠ¶æ€ã€æ—¥å¿—å®æ—¶åˆ·æ–°
- **æ‰‹åŠ¨ä¹°å…¥** - æ”¯æŒ UP/DOWN æ‰‹åŠ¨äº¤æ˜“
- **å‚æ•°è°ƒæ•´** - è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹äº¤æ˜“å‚æ•°
- **å‘Šè­¦é¢æ¿** - æ˜¾ç¤ºå‘Šè­¦ç»Ÿè®¡å’Œå†å²

#### Dashboard å¿«æ·é”®
- `s` - å¯åŠ¨/åœæ­¢äº¤æ˜“å¼•æ“
- `u` - æ‰‹åŠ¨ä¹°å…¥ UP
- `d` - æ‰‹åŠ¨ä¹°å…¥ DOWN
- `p` - è°ƒæ•´è¿è¡Œæ—¶å‚æ•°
- `r` - åˆ·æ–°æ˜¾ç¤º
- `c` - æ¸…ç©ºæ—¥å¿—
- `q` - é€€å‡º

#### å›æµ‹ç³»ç»Ÿ
- **å›æµ‹å¼•æ“** - å†å²æ•°æ®å›æ”¾éªŒè¯ç­–ç•¥
- **å‚æ•°ä¼˜åŒ–** - ç½‘æ ¼æœç´¢æœ€ä¼˜å‚æ•°ç»„åˆ
- **æ€§èƒ½æŒ‡æ ‡** - æ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€èƒœç‡

#### æµ‹è¯•å¥—ä»¶
- **å•å…ƒæµ‹è¯•** - 259 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ~72% è¦†ç›–ç‡
- **é›†æˆæµ‹è¯•** - API é›†æˆæµ‹è¯•æ¡†æ¶
- **ç«¯åˆ°ç«¯æµ‹è¯•** - å®Œæ•´äº¤æ˜“æµç¨‹ E2E æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•** - åŸºå‡†æ€§èƒ½æµ‹è¯•

#### å®‰å…¨å¢å¼º
- **SEC-001** - ç§é’¥å†…å­˜æ¸…ç†
- **SEC-002** - æ•æ„Ÿæ—¥å¿—è„±æ•
- **SEC-003** - HTTPS è¯ä¹¦éªŒè¯
- **SEC-005** - å®‰å…¨éšæœº UUID
- **SEC-006** - å¢å¼ºç­¾åæœºåˆ¶ (nonce + timestamp + method + path + body hash)
- **SEC-008** - æ—¥å¿—æ–‡ä»¶æƒé™æ§åˆ¶
- **SEC-009** - ç¯å¢ƒå˜é‡è¾¹ç•Œæ£€æŸ¥

#### é…ç½®ç³»ç»Ÿ
- **ç¯å¢ƒå˜é‡** - å®Œæ•´çš„ .env é…ç½®æ”¯æŒ
- **ç±»å‹å®‰å…¨** - TypeScript ç±»å‹å®šä¹‰
- **è¾¹ç•ŒéªŒè¯** - æ•°å­—å‚æ•°èŒƒå›´æ£€æŸ¥
- **æ¨¡å¼åˆ‡æ¢** - READ_ONLY / DRY_RUN æ¨¡å¼

#### å·¥å…·æ¨¡å—
- **CircularBuffer** - é«˜æ€§èƒ½ç¯å½¢ç¼“å†²åŒº
- **EventBus** - ç±»å‹å®‰å…¨çš„äº‹ä»¶æ€»çº¿
- **Logger** - ç»“æ„åŒ–æ—¥å¿— (æ”¯æŒ JSON æ ¼å¼)
- **AlertManager** - å¤šæ¸ é“å‘Šè­¦ç®¡ç†å™¨

#### æ–‡æ¡£
- **README.md** - é¡¹ç›®æ–‡æ¡£å’Œ API å‚è€ƒ
- **DEPLOYMENT.md** - éƒ¨ç½²æŒ‡å—
- **CHANGELOG.md** - æ›´æ–°æ—¥å¿—

### æŠ€æœ¯æ ˆ
- Node.js >= 20.0.0
- TypeScript 5.x
- Vitest (æµ‹è¯•æ¡†æ¶)
- blessed (ç»ˆç«¯ UI)
- better-sqlite3 (æ•°æ®åº“)
- ws (WebSocket)

---

## å¼€å‘è®¡åˆ’

### v0.3.0 (è®¡åˆ’)
- [ ] Web Dashboard å¯è§†åŒ–ç•Œé¢
- [ ] å¤šå¸‚åœºå¹¶è¡Œç›‘æ§ (ETH, SOL ç­‰)
- [ ] é«˜çº§é£æ§ç­–ç•¥
- [ ] èµ„é‡‘ç®¡ç†æ¨¡å—

### v0.4.0 (è®¡åˆ’)
- [ ] æœºå™¨å­¦ä¹ ä»·æ ¼é¢„æµ‹
- [ ] è‡ªåŠ¨å‚æ•°è°ƒä¼˜
- [ ] åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯å‘Šè­¦ App

---

## è´¡çŒ®è€…

- Kyd - é¡¹ç›®ä½œè€…

---

[Unreleased]: https://github.com/user/pmdumphedge/compare/v0.2.0...HEAD
[0.2.0]: https://github.com/user/pmdumphedge/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/user/pmdumphedge/releases/tag/v0.1.0
