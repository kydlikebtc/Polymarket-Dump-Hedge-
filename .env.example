# ============================================
# Polymarket Dump & Hedge Bot 配置模板
# ============================================
# 复制此文件为 .env 并填入实际值
# cp .env.example .env

# ============================================
# 市场配置 (必填)
# ============================================
# BTC 15分钟预测市场的 Token IDs
# 从 Polymarket 获取当前活跃市场的 token_id
# 例如: https://polymarket.com/event/btc-15min-xxx
TOKEN_ID_UP=
TOKEN_ID_DOWN=

# 市场 Condition ID (可选，用于查询市场状态)
CONDITION_ID=

# ============================================
# 网络配置 - Polymarket API 端点
# ============================================
# 官方文档: https://docs.polymarket.com/quickstart/reference/endpoints

# CLOB REST API (订单、订单簿、价格)
CLOB_API_URL=https://clob.polymarket.com

# Gamma API (事件、市场发现)
GAMMA_API_URL=https://gamma-api.polymarket.com

# Data API (持仓、活动、交易历史)
DATA_API_URL=https://data-api.polymarket.com

# CLOB WebSocket (实时订单簿)
CLOB_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market

# RTDS WebSocket (实时数据流)
RTDS_WS_URL=wss://ws-live-data.polymarket.com

# 兼容旧配置 (映射到 CLOB)
WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market
API_URL=https://clob.polymarket.com

# 重连配置
RECONNECT_DELAY=1000
MAX_RECONNECTS=5

# ============================================
# 钱包配置 (实盘交易必填)
# ============================================
# 以太坊私钥 (不带 0x 前缀)
# ⚠️ 警告: 请勿将真实私钥提交到版本控制!
# ⚠️ 建议使用专用交易钱包，不要使用主钱包
PRIVATE_KEY=

# 钱包地址 (带 0x 前缀)
WALLET_ADDRESS=

# ============================================
# Builder API 配置 (订单归因必填)
# ============================================
# Polymarket Builder Program 凭据
# 从 https://polymarket.com/settings?tab=builder 获取
# 用于订单归因和 Relayer 访问
#
# ⚠️ 警告: 请勿将凭据提交到版本控制!
BUILDER_API_KEY=
BUILDER_SECRET=
BUILDER_PASSPHRASE=

# ============================================
# 交易参数
# ============================================
# 每次交易的股数 (USDC 计价)
DEFAULT_SHARES=20

# 对冲触发阈值
# 当 UP_price + DOWN_price <= SUM_TARGET 时触发 Leg2 对冲
# 0.95 表示套利空间至少 5%
SUM_TARGET=0.95

# 暴跌检测阈值 (3秒滑动窗口内)
# 0.15 表示价格下跌超过 15% 时触发 Leg1 买入
MOVE_PCT=0.15

# 监控窗口 (分钟)
# 仅在回合开始后的前 N 分钟内监控暴跌
# 2 表示只在前 2 分钟监控
WINDOW_MIN=2

# ============================================
# 费用参数
# ============================================
# 交易手续费率 (Polymarket 默认 0.5%)
FEE_RATE=0.005

# 价差缓冲 (用于计算实际成本)
SPREAD_BUFFER=0.02

# ============================================
# 运行模式
# ============================================
# 只读模式 (仅监控价格，不执行任何交易)
READ_ONLY=false

# 干跑模式 (模拟交易，记录但不实际执行)
# 命令行 --dry-run 参数会覆盖此设置
DRY_RUN=false

# ============================================
# 数据库配置
# ============================================
# SQLite 数据库路径 (相对或绝对路径)
DB_PATH=./data/bot.db

# ============================================
# 日志配置
# ============================================
# 日志级别: debug, info, warn, error
LOG_LEVEL=info

# 日志文件路径 (可选)
LOG_FILE=./logs/bot.log

# ============================================
# 告警配置 (可选)
# ============================================
# 告警最低级别: info, warning, critical
# info - 所有告警
# warning - 只发送 warning 和 critical
# critical - 只发送 critical
ALERT_MIN_SEVERITY=info

# 告警节流配置
ALERT_THROTTLE_ENABLED=true
ALERT_THROTTLE_WINDOW_MS=60000
ALERT_THROTTLE_MAX_PER_WINDOW=10

# Telegram 通知 (可选)
# 从 @BotFather 创建 Bot 获取 Token
# 从 @userinfobot 获取 Chat ID
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_ENABLED=false

# Discord Webhook 通知 (可选)
# 从 Discord 频道设置 -> 集成 -> Webhooks 创建
DISCORD_WEBHOOK_URL=
DISCORD_ENABLED=false

# 静默时段配置 (可选)
# 在指定时间段内不发送通知
ALERT_QUIET_HOURS_ENABLED=false
ALERT_QUIET_HOURS_START=22
ALERT_QUIET_HOURS_END=8
ALERT_QUIET_HOURS_TIMEZONE=Asia/Shanghai

# ============================================
# 使用说明
# ============================================
#
# 1. Dry-Run 模式 (推荐先测试):
#    npm run bot:dry
#
# 2. 实盘模式 (需配置钱包):
#    npm run bot
#
# 3. 数据录制:
#    npm run recorder
#
# 4. 回测:
#    npm run backtest -- --start 2024-01-01 --end 2024-01-31
#
# 5. Dashboard:
#    npm run dashboard:dry
#
